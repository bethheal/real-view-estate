// Ensure role is valid and matches enum exactly
const validRoles = ['BUYER', 'AGENT'];
const formattedRole = role ? role.toUpperCase() : 'BUYER';

if (!validRoles.includes(formattedRole)) {
  return res.status(400).json({ message: 'Role must be either BUYER or AGENT' });
}

const user = await prisma.user.create({
  data: {
    name,
    email,
    phone,
    password: hashPass,
    role: formattedRole,
  },
});
